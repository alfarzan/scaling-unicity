# ReadMe

This repository contains the code related to the work done on investigating the rate of unicity reduction for large scale populations in mobility data. It is included in this repository for the sake of transparency, reproducibility and as an aid to understand the details of the research for the curious. 


This document will outline, in summary, what each code file contains so that the reader can navigate the repository. 

## Outline

Each of the folders in the repository contain the following:
- `library`: Contains all the code used in for the project, including the code for the model and those used to generate the plots. 
- `results`: Contains the results that can be used to recreate the plots in the paper. 
- `inputs`: Contains, as much as possible, the inputs used in the model. 

## Library

Here you can find a description of what each code file does. 

- `model_source.py`: Contains the code that is used to generate trajectories based on the unicity model. 
- `dataformat_utils.py`: Provides a series of helper functions to load, unload, and manipulate the data. 
- `unicity_utils.py`: Contains the code used to compute unicity
- `geoloc_utils.py`: Contains the code to construct the Delaunay tesselation from a set of coordinates and other related helper functions. 
- `extract_time.py`: Code that extracts the mean circadian distribution from data.
- `extract_activity.py`: Code that extracts the activity distribution from data.
- `extract_frequency.py`: Code that extracts the mean frequency distribution from data.
- `60M_run.py:` Code that is used to generate unicity estimates for populations ranging from 1M to 60M.
- `learning_curve.py`: Provides the code to compute the data to support the fact that the unicity model using distributions extracted from small samples of the data converges to the unicity model that uses distributions extracted from the entire 1M trajectories observed. 
- `generate_gridsearch_params.py`:This file computes the range of parameters for the beta and power law functions according to the earth movers' distance (EMD) of the resulting distributions from the empirical distribution.

## Results

Here you can find CSV files that replicate all the main results of the work. 

- `learning_curve`: Each CSV file in this folder corresponds to unicity estimates computed using sample sizes corresponding to the value inidicated in the file name. The folder also contains a numpy array which details the sample sizes. 
- `60M_model.csv`: This CSV file contains the unicty estimates of the model up to 60M trajectories. 
- `1M_observed.csv`: Contains the observed unicity values of the 1M trajectories in this study. 
- `1M_model.csv`: Containes the unicity values of 1M trajectories generated by the model.

## Inputs

Here all the inputs that we can share publicly are present. Unfortunately the frequency and activity distributions cannot be shared publicly, however, the fits to these disrtibutions are expressed in the text of the main work. The other two inputs to the model are:

- `circadian.npy`: The circadian distribution of activity. 
- `location_grid.txt`: This file is to contain the antenna number, and the latitude and longitude of each antenna. However, we are not able to share this information as per the request of the data controller. This file contains information on how to format such a file using external data if necessary. 